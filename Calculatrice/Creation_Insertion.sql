/*--2- CREATION SCHEMA AGENCE--

--CREATE SCHEMA AGENCE;*/

CREATE TABLE STATION
(nomSTATION VARCHAR2(15),
CAPACITE NUMBER(4) NOT NULL,
LIEU VARCHAR2(30) NOT NULL,
REGION VARCHAR2(50),
TARIF NUMBER(5) DEFAULT 0,
CONSTRAINT U_STATION UNIQUE(LIEU,REGION),
CONSTRAINT PK_STATION PRIMARY KEY (nomSTATION),
CONSTRAINT CK_STATION_REGION CHECK(REGION IN ('Ocean Indien', 'Antilles', 'Europe', 'Ameriques', 'Extreme orient'))
);

CREATE TABLE ACTIVITE
(nomSTATION VARCHAR2(15),
LIBELLE VARCHAR2(10),
PRIX NUMBER(5) DEFAULT 0,
CONSTRAINT PK_ACTIVITE PRIMARY KEY (nomSTATION,LIBELLE),
CONSTRAINT FK_ACTIVITE_STATION FOREIGN KEY (nomSTATION) REFERENCES STATION(nomSTATION)
ON DELETE CASCADE);

CREATE TABLE CLIENT
(ID NUMBER(3),
NOM VARCHAR2(20) NOT NULL,
PRENOM VARCHAR2(20),
VILLE VARCHAR2(15) NOT NULL,
REGION VARCHAR2(50),
SOLDE NUMBER(8) DEFAULT 0,
CONSTRAINT PK_CLIENT PRIMARY KEY (ID));

CREATE TABLE SEJOUR
(idCLIENT NUMBER(3),
STATION VARCHAR2(15),
DEBUT DATE,
nbPLACES NUMBER(4) NOT NULL,
CONSTRAINT PK_SEJOUR PRIMARY KEY (idCLIENT,STATION,DEBUT),
CONSTRAINT FK_SEJOUR_CLIENT FOREIGN KEY (idCLIENT) REFERENCES CLIENT(ID),
CONSTRAINT FK_SEJOUR_SATION FOREIGN KEY (STATION) REFERENCES STATION(nomSTATION)
ON DELETE CASCADE);
--3- Insertion des donnees--

INSERT INTO STATION VALUES('Venusa', 350, 'Guadeloupe', 'Antilles', 1200); 
INSERT INTO STATION VALUES('Farniente', 200, 'Seychelles', 'Ocean Indien', 1500 ); 
INSERT INTO STATION VALUES ('Santalba', 150, 'Martinique', 'Antilles', 2000 ); 
INSERT INTO STATION VALUES('Passac', 400, 'Alpes', 'Europe', 1000 ); 

INSERT INTO ACTIVITE VALUES('Venusa', 'Voile', 150);
INSERT INTO ACTIVITE VALUES('Venusa', 'Plongee', 120);
INSERT INTO ACTIVITE VALUES('Farniente', 'Plongee', 130 );
INSERT INTO ACTIVITE VALUES('Passac', 'Ski', 200 );
INSERT INTO ACTIVITE VALUES('Passac', 'Piscine', 20 );
INSERT INTO ACTIVITE VALUES('Santalba', 'Kayac', 50);

INSERT INTO CLIENT VALUES(10, 'Fogg', 'Phileas', 'Londres', 'Europe', 12465);
INSERT INTO CLIENT VALUES(20, 'Pascal', 'Blaise', 'Paris', 'Europe', 6763);
INSERT INTO CLIENT VALUES(30, 'Kerouac', 'Jack', 'New York', 'Ameriques', 9812);
INSERT INTO CLIENT VALUES (40, 'Bob', 'bob', 'New York', 'Ameriques', 99999999);

INSERT INTO SEJOUR VALUES(20, 'Venusa', TO_DATE('03-08-2003','DD-MM-YYYY'), 4);
INSERT INTO SEJOUR VALUES (40, 'Venusa', TO_DATE('03-08-2016', 'dd-mm-yyyy'),
351);
INSERT INTO SEJOUR VALUES (20, 'Venusa', TO_DATE('03-08-2016', 'dd-mm-yyyy'), 3);
INSERT INTO SEJOUR VALUES (40, 'Venusa', TO_DATE('08-27-2016', 'mm-dd-yyyy'), 3);
INSERT INTO SEJOUR VALUES (40, 'Venusa', TO_DATE('11-08-2016', 'dd-mm-yyyy'),351);
INSERT INTO SEJOUR VALUES (30, 'Venusa', TO_DATE('1998-08-03', 'yyyy-mm-dd'),3);
INSERT INTO SEJOUR VALUES (20, 'Venusa', TO_DATE('1998-08-03', 'yyyy-mm-dd'),6);
INSERT INTO SEJOUR VALUES (10, 'Passac', TO_DATE('1998-07-01', 'yyyy-mm-dd'),2);
INSERT INTO SEJOUR VALUES (30, 'Santalba',TO_DATE('1996-08-14', 'yyyy-mm-dd'),5);
INSERT INTO SEJOUR VALUES (20, 'Santalba', TO_DATE('1998-08-03', 'yyyy-mm-dd'),4);
INSERT INTO SEJOUR VALUES (30, 'Passac', TO_DATE('1998-08-15', 'yyyy-mm-dd'),3);
INSERT INTO SEJOUR VALUES (30, 'Farniente',TO_DATE('1999-06-24', 'yyyy-mm-dd'),5);
INSERT INTO SEJOUR VALUES (10, 'Farniente' , TO_DATE('1998-09-05', 'yyyy-mm-dd'),3);